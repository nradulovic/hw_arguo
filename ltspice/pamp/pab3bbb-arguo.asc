Version 4
SHEET 1 6124 2336
WIRE 2272 -1536 2240 -1536
WIRE 2304 -1536 2272 -1536
WIRE 2416 -1536 2384 -1536
WIRE 2544 -1536 2496 -1536
WIRE 2592 -1536 2544 -1536
WIRE 2272 -1520 2272 -1536
WIRE 2592 -1520 2592 -1536
WIRE 2928 -1504 2912 -1504
WIRE 3040 -1504 3008 -1504
WIRE 4288 -1504 3120 -1504
WIRE 992 -1472 976 -1472
WIRE 1008 -1472 992 -1472
WIRE 992 -1456 992 -1472
WIRE 2272 -1424 2272 -1456
WIRE 2592 -1424 2592 -1440
WIRE 992 -1360 992 -1376
WIRE 992 -1344 992 -1360
WIRE 2272 -1328 2272 -1344
WIRE 2272 -1328 2240 -1328
WIRE 2304 -1328 2272 -1328
WIRE 2416 -1328 2384 -1328
WIRE 2544 -1328 2496 -1328
WIRE 2592 -1328 2592 -1344
WIRE 2592 -1328 2544 -1328
WIRE 2944 -1312 2912 -1312
WIRE 3056 -1312 3024 -1312
WIRE 3232 -1312 3136 -1312
WIRE 3712 -1312 3232 -1312
WIRE 896 -1264 896 -1472
WIRE 1088 -1264 1088 -1472
WIRE 992 -1216 992 -1264
WIRE 1024 -1216 992 -1216
WIRE 2944 -1216 2912 -1216
WIRE 3056 -1216 3024 -1216
WIRE 3232 -1216 3232 -1312
WIRE 3232 -1216 3136 -1216
WIRE 3616 -1120 3136 -1120
WIRE 3712 -1120 3712 -1232
WIRE 3712 -1120 3696 -1120
WIRE 3728 -1120 3712 -1120
WIRE 4288 -1120 4288 -1504
WIRE 4288 -1120 3808 -1120
WIRE 864 -1024 864 -1056
WIRE 880 -1024 864 -1024
WIRE 960 -1024 960 -1056
WIRE 960 -1024 944 -1024
WIRE 976 -1024 960 -1024
WIRE 1056 -1024 1056 -1056
WIRE 1056 -1024 1040 -1024
WIRE 864 -928 864 -1024
WIRE 880 -928 864 -928
WIRE 960 -928 960 -1024
WIRE 960 -928 944 -928
WIRE 976 -928 960 -928
WIRE 1056 -928 1056 -1024
WIRE 1056 -928 1040 -928
WIRE 2944 -928 2912 -928
WIRE 3056 -928 3024 -928
WIRE 3136 -928 3136 -1120
WIRE 864 -832 864 -928
WIRE 880 -832 864 -832
WIRE 960 -832 960 -928
WIRE 960 -832 944 -832
WIRE 976 -832 960 -832
WIRE 1056 -832 1056 -928
WIRE 1056 -832 1040 -832
WIRE 3136 -832 3136 -928
WIRE 3632 -832 3136 -832
WIRE 3712 -832 3712 -1120
WIRE 3712 -832 3696 -832
WIRE 3728 -832 3712 -832
WIRE 4288 -832 4288 -1120
WIRE 4288 -832 3792 -832
WIRE 864 -736 864 -832
WIRE 880 -736 864 -736
WIRE 960 -736 960 -832
WIRE 960 -736 944 -736
WIRE 976 -736 960 -736
WIRE 1056 -736 1056 -832
WIRE 1056 -736 1040 -736
WIRE 3136 -736 3136 -832
WIRE 3344 -736 3136 -736
WIRE 3712 -736 3712 -832
WIRE 3712 -736 3408 -736
WIRE 4016 -736 3712 -736
WIRE 4288 -736 4288 -832
WIRE 4288 -736 4080 -736
WIRE 336 -640 320 -640
WIRE 416 -640 400 -640
WIRE 512 -640 496 -640
WIRE 864 -640 864 -736
WIRE 880 -640 864 -640
WIRE 960 -640 960 -736
WIRE 960 -640 944 -640
WIRE 976 -640 960 -640
WIRE 1056 -640 1056 -736
WIRE 1056 -640 1040 -640
WIRE 960 -576 960 -640
WIRE 144 -544 32 -544
WIRE 224 -544 208 -544
WIRE 320 -544 320 -640
WIRE 320 -544 304 -544
WIRE 416 -544 320 -544
WIRE 512 -544 512 -640
WIRE 512 -544 496 -544
WIRE 608 -544 512 -544
WIRE -448 -448 -448 -464
WIRE -352 -448 -352 -464
WIRE -256 -448 -256 -592
WIRE 320 -448 320 -544
WIRE 416 -448 320 -448
WIRE 512 -448 512 -544
WIRE 512 -448 480 -448
WIRE 864 -448 864 -640
WIRE 1056 -448 1056 -640
WIRE 1600 -432 1600 -448
WIRE -544 -352 -544 -384
WIRE -448 -352 -448 -368
WIRE -352 -352 -352 -368
WIRE -256 -352 -256 -368
WIRE 3136 -352 3136 -736
WIRE 3328 -352 3136 -352
WIRE 4288 -352 4288 -736
WIRE 4288 -352 4096 -352
WIRE 3136 -336 3136 -352
WIRE 3328 -336 3328 -352
WIRE 4096 -336 4096 -352
WIRE 4288 -336 4288 -352
WIRE 320 -304 320 -448
WIRE 704 -304 320 -304
WIRE -544 -256 -544 -272
WIRE -448 -256 -448 -272
WIRE -352 -256 -352 -272
WIRE -256 -256 -256 -272
WIRE 1136 -256 1120 -256
WIRE 1216 -256 1216 -352
WIRE 1312 -256 1312 -352
WIRE 1408 -256 1408 -448
WIRE 1408 -256 1392 -256
WIRE 1600 -256 1600 -368
WIRE 1600 -256 1408 -256
WIRE 1696 -256 1600 -256
WIRE 1712 -256 1696 -256
WIRE 1888 -256 1888 -448
WIRE 1888 -256 1792 -256
WIRE 1408 -240 1408 -256
WIRE 704 -208 320 -208
WIRE 1696 -160 1696 -256
WIRE 1712 -160 1696 -160
WIRE 1792 -160 1792 -256
WIRE 3328 -160 3328 -272
WIRE 4288 -160 4288 -272
WIRE 4288 -160 3328 -160
WIRE 1408 -144 1408 -160
WIRE 1600 -144 1600 -256
WIRE 1408 -64 1408 -80
WIRE 1600 -64 1600 -80
WIRE 3136 -64 3136 -272
WIRE 4096 -64 4096 -272
WIRE 4096 -64 3136 -64
WIRE 144 32 128 32
WIRE 224 32 208 32
WIRE 320 32 320 -208
WIRE 320 32 304 32
WIRE 416 32 320 32
WIRE 512 32 496 32
WIRE 608 32 512 32
WIRE 1248 32 1056 32
WIRE 1056 48 1056 32
WIRE -384 80 -384 64
WIRE 320 128 320 32
WIRE 336 128 320 128
WIRE 416 128 400 128
WIRE 512 128 512 32
WIRE 512 128 496 128
WIRE 3136 128 3136 -64
WIRE 3728 128 3136 128
WIRE 4288 128 4288 -160
WIRE 4288 128 3792 128
WIRE 1056 144 1056 128
WIRE 1056 176 1056 144
WIRE 1248 224 1248 32
WIRE 3136 224 3136 128
WIRE 3440 224 3136 224
WIRE 3632 224 3520 224
WIRE 3712 224 3712 -736
WIRE 3712 224 3696 224
WIRE 3728 224 3712 224
WIRE 3904 224 3792 224
WIRE 4288 224 4288 128
WIRE 4288 224 3984 224
WIRE 768 240 768 -64
WIRE 976 320 960 320
WIRE 1056 320 1056 240
WIRE 1056 320 1040 320
WIRE 1248 320 1248 304
WIRE 864 416 864 -64
WIRE 960 416 864 416
WIRE 1056 416 1056 320
WIRE 1056 416 1040 416
WIRE 3136 416 3136 224
WIRE 3616 416 3136 416
WIRE 3712 416 3712 224
WIRE 3712 416 3696 416
WIRE 3728 416 3712 416
WIRE 4288 416 4288 224
WIRE 4288 416 3808 416
FLAG 992 -1472 x
FLAG 1408 -448 out
IOPIN 1408 -448 Out
FLAG 992 -1360 xp
FLAG 1408 -64 pwrgnd
IOPIN 1408 -64 In
FLAG 128 32 sgnd
IOPIN 128 32 In
FLAG 2912 -1312 pwrgnd
IOPIN 2912 -1312 Out
FLAG 608 32 out
IOPIN 608 32 In
FLAG 1888 -448 speaker
IOPIN 1888 -448 Out
FLAG 2240 -1536 speaker
IOPIN 2240 -1536 In
FLAG 2912 -1216 pwrgnd
IOPIN 2912 -1216 Out
FLAG 896 -1264 AC1
IOPIN 896 -1264 BiDir
FLAG 1088 -1264 AC2
IOPIN 1088 -1264 BiDir
FLAG 1216 -352 AC1
IOPIN 1216 -352 BiDir
FLAG 1312 -352 AC2
IOPIN 1312 -352 BiDir
FLAG 2544 -1536 SPK+
FLAG 2544 -1328 SPK-
FLAG 1600 -448 hvcc
IOPIN 1600 -448 In
FLAG 1600 -64 hvee
IOPIN 1600 -64 In
FLAG -384 64 sgnd
IOPIN -384 64 In
FLAG 960 -1056 pwrgnd
IOPIN 960 -1056 In
FLAG 1024 -1216 0
FLAG 960 -576 0
FLAG 768 240 pwrgnd
IOPIN 768 240 In
FLAG -384 160 pwrgnd
IOPIN -384 160 In
FLAG 608 -544 sgnd
IOPIN 608 -544 In
FLAG 2912 -1504 hvcc
IOPIN 2912 -1504 Out
FLAG 2912 -928 hvee
IOPIN 2912 -928 Out
FLAG 2240 -1328 pwrgnd
IOPIN 2240 -1328 Out
FLAG 1056 -1056 hvee
IOPIN 1056 -1056 In
FLAG 864 -1056 hvcc
IOPIN 864 -1056 In
FLAG -448 -256 sgnd
IOPIN -448 -256 In
FLAG -448 -464 intermet
IOPIN -448 -464 Out
FLAG -352 -464 impulse
IOPIN -352 -464 Out
FLAG -256 -592 imd
IOPIN -256 -592 Out
FLAG -352 -256 sgnd
IOPIN -352 -256 In
FLAG -256 -256 sgnd
IOPIN -256 -256 In
FLAG -544 -256 sgnd
IOPIN -544 -256 In
FLAG -544 -384 sine
IOPIN -544 -384 Out
FLAG 960 320 0
FLAG 1248 320 0
FLAG 1056 144 prot
FLAG 32 -544 sine
IOPIN 32 -544 Out
SYMBOL res 320 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {nfb1}
SYMBOL voltage 3824 416 R90
WINDOW 123 0 0 Left 2
WINDOW 3 -94 177 Invisible 2
SYMATTR Value SINE(0 {supplyVLTL*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rserl}
SYMATTR InstName V2
SYMBOL current 992 -1376 R180
WINDOW 0 24 77 Left 2
WINDOW 3 24 0 Invisible 2
WINDOW 123 -71 178 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Ii
SYMATTR Value 0
SYMATTR Value2 AC {u(prb)}
SYMBOL voltage 992 -1472 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 Invisible 2
WINDOW 123 -97 96 VBottom 2
WINDOW 39 -32 56 VBottom 2
SYMATTR InstName Vi
SYMATTR Value 0
SYMATTR Value2 AC {u(-prb)}
SYMBOL schottky 1584 -368 M180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N5404
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1584 -80 M180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N5404
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind2 1696 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName LTRF
SYMATTR Value 4µ
SYMATTR SpiceLine Rser=10m Rpar=3meg Cpar=1p
SYMATTR Type ind
SYMBOL res 1696 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 2.2
SYMBOL res 512 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {nfb2}
SYMBOL voltage 992 -1472 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 0
SYMBOL voltage 3712 416 M270
WINDOW 123 0 0 Left 2
WINDOW 3 -96 -62 Invisible 2
SYMATTR Value SINE(0 {supplyVLTL*sqrt(2)} 50 1m 0 {phi})
SYMATTR SpiceLine Rser={rserl}
SYMATTR InstName V3
SYMBOL res 1392 -256 R0
SYMATTR InstName R54
SYMATTR Value 10
SYMBOL res 2576 -1536 R0
SYMATTR InstName R60
SYMATTR Value {Zreal}
SYMBOL ind 2576 -1440 R0
SYMATTR InstName L19
SYMATTR Value {Zimg}
SYMATTR SpiceLine Cpar=10p
SYMBOL voltage 992 -1360 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value 0
SYMATTR InstName V18
SYMBOL cap 1392 -144 R0
SYMATTR InstName C24
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL polcap 208 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1m
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=1110k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL ind2 2928 -1296 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND2
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3152 -1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 25m
SYMBOL ind 3696 -1328 R0
SYMATTR InstName L4
SYMATTR Value 4n
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 2288 -1520 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKP
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL ind2 2288 -1312 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LSPKN2
SYMATTR Value {con2_len*20n}
SYMATTR SpiceLine Rser={con2_len*.5m}
SYMATTR Type ind
SYMBOL res 2512 -1552 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R41
SYMATTR Value 15m
SYMBOL res 2512 -1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 15m
SYMBOL ind2 2928 -1200 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LPWRGND1
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3152 -1232 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 25m
SYMBOL voltage 1120 -256 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL voltage 1408 -256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 0
SYMBOL res 512 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {rf}
SYMBOL cap 400 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value {cf}
SYMATTR SpiceLine Rser=140m Lser=3n Rpar=7.4meg
SYMBOL res 3712 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R42
SYMATTR Value 10k
SYMBOL res 3824 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R46
SYMATTR Value 10k
SYMBOL polcap 880 -624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C32
SYMATTR Value 2m2
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.070 Lser=5n Rpar=900k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res -400 64 R0
SYMATTR InstName R49
SYMATTR Value 10
SYMBOL cap 2256 -1520 R0
SYMATTR InstName C11
SYMATTR Value 100n
SYMBOL res 2256 -1440 R0
SYMATTR InstName R40
SYMATTR Value 10
SYMBOL res 320 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {nfb1}
SYMBOL res 512 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {nfb2}
SYMBOL polcap 208 -528 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C13
SYMATTR Value 1m
SYMATTR SpiceLine V=6.3 Irms=1.44 Rser=0.09 Lser=5.5n Rpar=1110k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL res 512 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL cap 400 -624 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C15
SYMATTR Value 11p
SYMATTR SpiceLine Rser=140m Lser=3n Rpar=7.4meg
SYMBOL polcap 976 -624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value 2m2
SYMATTR SpiceLine V=63 Irms=2.77 Rser=0.070 Lser=5n Rpar=900k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL cap 1040 -752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 944 -752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 1040 -848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 944 -848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 480 -464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cmc1
SYMATTR Value 2n2
SYMATTR SpiceLine V=100 Irms=20.8m Rser=5.448 Lser=3n Rpar=6.4meg Cpar=1p
SYMBOL cap 3632 208 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 470n
SYMATTR SpiceLine Rser=600m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL res 3536 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value .47
SYMBOL res 4000 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value .47
SYMBOL polcap 3408 -752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.02 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL polcap 4080 -752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C14
SYMATTR Value 10m
SYMATTR SpiceLine V=50 Irms=2.5 Rser=0.02 Lser=20n Rpar=40k Cpar=3p
SYMATTR Description Capacitor
SYMATTR Type cap
SYMBOL schottky 3120 -336 R0
WINDOW 3 -144 95 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D1
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3312 -336 R0
WINDOW 3 -239 65 Left 2
SYMATTR Value GBPC3502
SYMATTR InstName D2
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 4080 -272 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -14 -112 Left 2
SYMATTR InstName D3
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 4272 -272 M180
WINDOW 0 24 72 Left 2
WINDOW 3 -112 -78 Left 2
SYMATTR InstName D4
SYMATTR Value GBPC3502
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL pab3bbb-arguo-module 912 -256 R0
SYMATTR InstName X1
SYMBOL ind2 2928 -912 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVEE
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3152 -944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 25m
SYMBOL ind2 2912 -1488 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName LVCC
SYMATTR Value {con1_len*20n}
SYMATTR SpiceLine Rser={con1_len*.5m}
SYMATTR Type ind
SYMBOL res 3136 -1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 25m
SYMBOL cap 1040 -944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 944 -944 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 1040 -1040 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 944 -1040 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 100n
SYMATTR SpiceLine Rser=700m Lser=7n Rpar=4.4meg Cpar=1p
SYMBOL cap 3728 208 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 470n
SYMATTR SpiceLine Rser=600m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL cap 3728 112 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C21
SYMATTR Value 470n
SYMATTR SpiceLine Rser=600m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL cap 3728 -848 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C22
SYMATTR Value 470n
SYMATTR SpiceLine Rser=600m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL cap 3632 -848 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 470n
SYMATTR SpiceLine Rser=600m Lser=6n Rpar=4.4meg Cpar=1p
SYMBOL voltage -448 -368 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 10m 10 0 5)
SYMATTR InstName V5
SYMBOL voltage -352 -368 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {vinput} 1u 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V7
SYMBOL voltage -352 -464 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {-vinput} {1u+(1/(freq*2))} 1n 1n {1/(freq*2)} {1/freq})
SYMATTR InstName V8
SYMBOL voltage -256 -368 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 19k)
SYMATTR InstName V9
SYMBOL voltage -256 -464 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 {vinput/2} 20k 0 0)
SYMATTR InstName V10
SYMBOL voltage -448 -464 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 310m 10 0 5)
SYMATTR InstName V13
SYMBOL voltage -544 -368 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value SINE(0 {vinput} {freq} 0 0 0)
SYMATTR InstName V14
SYMBOL res 1040 32 R0
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL voltage 1248 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V12
SYMATTR Value 5
SYMBOL res 1056 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 36k
SYMBOL diode 1040 176 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL diode 976 336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value 1N4148
TEXT 144 -1488 Left 2 !;op
TEXT -560 -1008 Left 2 !.option plotwinsize=0
TEXT -560 -976 Left 2 !.option noopiter
TEXT -560 -1616 Left 2 ;Transient
TEXT -560 -1456 Left 2 !.four {freq} 10 {iterations} v(SPK+,SPK-)
TEXT 144 -1520 Left 2 !.param prb=0
TEXT -560 -1520 Left 2 !.param timestep {1/((262144/8)*freq)}
TEXT -560 -1552 Left 2 !.param freq=1e3
TEXT -560 -1488 Left 2 !.param stoptime {iterations/freq}
TEXT 144 -1584 Left 2 ;.ac oct 100 10 100meg
TEXT 144 -1552 Left 2 ;.step param prb list -1 1
TEXT 144 -1616 Left 2 ;AC analysis
TEXT -560 -1424 Left 2 !.param iterations=120
TEXT 152 -1280 Left 2 !.param Zimp=8
TEXT 2144 -1216 Left 2 !.param Zreal Zimp/2
TEXT 2144 -1184 Left 2 !.param Zimg (Zimp*sqrt(3))/(4*pi*freq)
TEXT 152 -1248 Left 2 !.param supplyPWRL=150
TEXT 152 -1184 Left 2 !.param supplyVLTL=33
TEXT -560 -1216 Left 2 !.lib ../spice_root/lib/STM_D.lib
TEXT 152 -1312 Left 2 !.param voutput=28
TEXT 152 -1120 Left 2 !.param supplyK=0.05
TEXT 3360 -1560 Left 2 !.param rserl={(supplyVLTL*supplyVLTL*supplyK)/supplyPWRL}
TEXT -560 -1584 Left 2 !.tran 0 {stoptime} 0 {timestep}
TEXT 4376 -1600 Left 2 !.param phi 90
TEXT 504 -1312 Left 2 !.param con1_len 10
TEXT 3360 -1592 Left 2 !KCON1 LVCC LPWRGND1 LPWRGND2 LVEE 0.8
TEXT 504 -1280 Left 2 !.param con2_len 10
TEXT 2144 -1248 Left 2 !KCON2 LSPKP LSPKN2 0.8
TEXT 2128 -1616 Left 2 ;Konektor zvucnika i zvucnik
TEXT 2800 -1616 Left 2 ;Konektor napajanja, star ground i napajanje
TEXT 1200 -1616 Left 2 ;Negativna povratna sprega
TEXT 152 -1344 Left 2 ;Circuit parameters
TEXT 992 -1616 Center 2 ;AC sonda
TEXT -560 -1280 Left 2 !.lib ../spice_root/lib/FCS_D.lib
TEXT 504 -1248 Left 2 !.param BIAS=0.5
TEXT -560 -1248 Left 2 !.lib ../spice_root/lib/ONNN_D.lib
TEXT -560 -1040 Left 2 !.param vinput voutput*(nfb1/nfb2)
TEXT 504 -1216 Left 2 !.param nfb1=200
TEXT 504 -1184 Left 2 !.param nfb2=5k1
TEXT 368 272 Left 2 !.param cf=18p
TEXT 376 304 Left 2 !.param rf=1e9
TEXT -560 -1344 Left 2 ;Libraries
TEXT -24 -968 Left 2 ;.step param Zimp list 10m 100m 1 2 3 4
RECTANGLE Normal 96 -1632 -576 -1392
RECTANGLE Normal 96 -1088 -576 -1360
RECTANGLE Normal 800 -1632 128 -1392
RECTANGLE Normal 2720 -1152 2112 -1632 2
RECTANGLE Normal 1120 -1152 864 -1632 2
RECTANGLE Normal 2048 -1152 1184 -1632 2
RECTANGLE Normal 800 -1088 128 -1360
RECTANGLE Normal 4784 480 2784 -1632 2
